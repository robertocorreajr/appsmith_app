{
  "pluginType": "DB",
  "pluginId": "postgres-plugin",
  "unpublishedAction": {
    "name": "get_dest_account_billing",
    "datasource": {
      "name": "saas-monolith",
      "pluginId": "postgres-plugin",
      "messages": [],
      "isAutoGenerated": false,
      "id": "saas-monolith",
      "deleted": false,
      "policies": [],
      "userPermissions": []
    },
    "pageId": "Migration",
    "actionConfiguration": {
      "timeoutInMillisecond": 10000,
      "paginationType": "NONE",
      "encodeParamsToggle": true,
      "body": "SELECT\n\tupper(ab.name) AS billing_name,\n\tu.email,\n\tab.cnpj,\n\tCASE\n\t\tab.payment_method \n  WHEN 'bank_slip_bb' THEN 'BOLETO BANCÁRIO'\n\t\tWHEN 'bank_slip' THEN 'BOLETO BANCÁRIO'\n\t\tWHEN 'deposit' THEN 'DEPÓSITO'\n\t\tWHEN 'itau_bank_slip' THEN 'BOLETO BANCÁRIO'\n\t\tWHEN 'credit_card' THEN 'CARTÃO DE CRÉDITO'\n\t\tELSE '---'\n\tEND AS payment_method,\n\tCASE\n\t\tab.payment_status \n  WHEN 'unpaid' THEN 'INADIMPLENTE'\n\t\tWHEN 'paid' THEN 'PAGO'\n\t\tWHEN 'awaiting' THEN 'EM ABERTO'\n\t\tWHEN 'late' THEN 'ATRASADO'\n\tEND AS payment_status,\n\tCASE\n\t\tWHEN p.identifier IS NULL THEN 'SEM PLANO'\n\t\tELSE upper(p.identifier)\n\tEND AS plan,\n\tto_char(a.created_at, 'DD/MM/YYYY') AS created_at,\n\tCASE\n\t\tWHEN a.sign_date IS NULL THEN 'SEM ASSINATURA'\n\t\tELSE to_char(a.sign_date, 'DD/MM/YYYY')\n\tEND AS sign_date,\n\tu.\"name\"\nFROM\n\taccount_billing ab\nLEFT JOIN plan p ON\n\tab.plan_id = p.id\nJOIN account a ON\n\tab.account_id = a.id\nJOIN \"user\" u ON\n\ta.admin_id = u.id\nWHERE\n\tab.account_id = {{dest_input_account.text}};",
      "selfReferencingDataPaths": [],
      "pluginSpecifiedTemplates": [
        {
          "value": true
        }
      ]
    },
    "executeOnLoad": false,
    "dynamicBindingPathList": [],
    "isValid": true,
    "invalids": [],
    "messages": [],
    "jsonPathKeys": [
      "dest_input_account.text"
    ],
    "userSetOnLoad": true,
    "confirmBeforeExecute": false,
    "policies": [],
    "userPermissions": []
  },
  "id": "Migration_get_dest_account_billing",
  "deleted": false,
  "gitSyncId": "638651304f9d9f1746a71d93_638753174f9d9f1746a71dd3"
}